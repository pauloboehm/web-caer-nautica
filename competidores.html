<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Competidores - Náutica CAER</title>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<style>
    * {
        box-sizing: border-box;
    }

    body {
        font-family: "Segoe UI", Roboto, Arial, sans-serif;
        background: #f2f3f7;              /* fundo estilo app */
        margin: 0;
        padding: 16px;
        max-width: 500px;                 /* largura ideal de app */
        margin-left: auto;
        margin-right: auto;
    }

    h3 {
        font-weight: 600;
        margin-bottom: 15px;
        color: #222;
    }

    .box {
        padding: 20px;
        background: white;
        border-radius: 14px;
        margin-bottom: 22px;

        /* sombra suave estilo iOS */
        box-shadow: 0 4px 10px rgba(0,0,0,0.06);
    }

    label {
        font-size: 1.05rem;
        font-weight: 500;
        display: block;
        margin-bottom: 6px;
        color: #444;
    }

    input, select {
        width: 100%;
        padding: 14px;
        font-size: 1.05rem;
        border-radius: 10px;
        border: 1px solid #d0d0d0;
        background: #fafafa;

        /* leve sombra interna para profundidade */
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.04);
        margin-bottom: 18px;
        transition: border 0.2s, background 0.2s;
    }

    input:focus,
    select:focus {
        border-color: #007BFF;
        background: #fff;
        outline: none;
    }

    button {
        width: 100%;
        padding: 16px;
        font-size: 1.15rem;
        border-radius: 12px;
        border: none;
        background-color: #1976FF;
        color: white;
        cursor: pointer;
        font-weight: 600;

        /* animação suave */
        transition: background-color 0.2s, transform 0.1s;
    }

    button:active {
        transform: scale(0.98);
    }

    button:hover {
        background-color: #0a5fe0;
    }

    /* ----- Responsividade para celulares ----- */
    @media (max-width: 600px) {

    body {
        padding: 18px;
        max-width: 420px;         /* torna mais estreito no celular */
    }

    .box {
        padding: 22px;
    }

    h3 {
        font-size: 1.6rem;        /* título maior */
        margin-bottom: 18px;
    }

    label {
        font-size: 1.3rem;        /* labels maiores */
        margin-bottom: 10px;
    }

    input, select {
        font-size: 1.25rem;       /* texto bem maior */
        padding: 20px;           /* aumenta área de toque */
        border-radius: 14px;
    }

    button {
        font-size: 1.35rem;       /* texto do botão maior */
        padding: 22px;            /* botão grande estilo app */
        border-radius: 14px;
    }
}
</style>
</head>
<body>

<h2>Competidores (Náutica CAER)</h2>

<div class="box">
    <h3>Lista de Barcos</h3>
    <ul id="listaCompetidores"></ul>
</div>

<div class="box">
    <h3>Adicionar novo competidor</h3>

    <label>Nome do barco:</label><br>
    <input type="text" id="inputNome" placeholder="Digite o nome"><br><br>

    <label>Selecione o circuito:</label><br>
    <select id="selectCircuito"></select><br><br>

    <button onclick="adicionarCompetidor()">Adicionar</button>
</div>

<script src="firedb.js"></script>

<script>

// Inicializa
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// --------------------------------------------------
// 2) CARREGAR LISTA DE COMPETIDORES
// --------------------------------------------------
function carregarCompetidores() {
    const lista = document.getElementById("listaCompetidores");
    lista.innerHTML = "";

    db.ref("competidores").on("value", snap => {
        lista.innerHTML = "";

        snap.forEach(item => {
            const comp = item.val();
            const li = document.createElement("li");
            li.textContent = `${comp.nome} — circuito: ${comp.circuitoAtual}`;
            lista.appendChild(li);
        });
    });
}


// --------------------------------------------------
// 3) CARREGAR OPÇÕES DE CIRCUITO NO SELECT
// --------------------------------------------------
function carregarCircuitos() {
    const select = document.getElementById("selectCircuito");

    db.ref("circuitos").once("value").then(snap => {
        select.innerHTML = "";

        snap.forEach(item => {
            const circuito = item.val();
            const opt = document.createElement("option");
            opt.value = circuito.nome;
            opt.textContent = circuito.nome;
            select.appendChild(opt);
        });
    });
}


// --------------------------------------------------
// 4) ADICIONAR NOVO COMPETIDOR
// --------------------------------------------------
function adicionarCompetidor() {
    const nome = document.getElementById("inputNome").value.trim();
    const circuito = document.getElementById("selectCircuito").value;

    if (!nome) {
        alert("Digite o nome do barco!");
        return;
    }

    const novo = db.ref("competidores").push();

    novo.set({
        nome: nome,
        modalidades: ["vela/motor"],
        circuitoAtual: circuito
    })
    .then(() => {
        alert("Competidor adicionado!");
        document.getElementById("inputNome").value = "";
    })
    .catch(err => alert("Erro: " + err));
}


// --------------------------------------------------
// 5) INICIALIZAÇÃO
// --------------------------------------------------
carregarCompetidores();
carregarCircuitos();

</script>

</body>
</html>
